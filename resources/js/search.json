[[{"l":"Приветствую вас на моем сайте","p":["На этом сайте я собрал гайды по настройке разных служб для разных операционных систем"]}],[{"l":"Bash ssh VDS","p":["Небольшой гайд для подключения к вашему серверу через ssh по команде:","Нам надо зайти в файлик /etc/bashrc и в конце файла дописать небольшую функцию","После этого нам надо перезайти в терминал или перезайти под пользователем"]}],[{"l":"Joomla","p":["user@alt who am i"]}],[{"l":"Joomla (mysql)","p":["Этот конфиг если не получится сделать по параметрам!!!"]}],[{"l":"Joomla (pgadmin)"}],[{"l":"Minecraft Server","p":["Для того чтобы поднять майнкрафт сервер с помощью докера нам надо:","Скачать docker через пакетный менеджер apt","Через пакетный менеджер dnf","Запускаем контейнер с образом из интернета и указываем для него параметры","-d - отвечает за запуск в фоне-p - указываем порт для нашего сервера--volume - указываем где будут храниться данные сервера--restart указываем что контейнер будет сам подниматься после перезагрузки-e отвечает за правила (возможно)--name - указываем имя нашему контейнеру 3. После запуска нам надо настроить параметры для нашего сервера, заходим в файл и меняем нужные нам параметры","В конце перезагружаем контейнер чтобы применились наши настройки","Вот и все, теперь заходим в майнкрафт и указываем айпи сервера и порт для подключения к серверу"]}],[{"l":"Nextcloud","p":["Скачиваем докер и докер компоуз","Настраиваем директории для хранения файлов:","Создаём .env файл:","Создаём docker-compose:","Запускаем докер"]}],[{"l":"OSPF on alt (поверх vrrp)"}],[{"l":"Vlans on opnsense","p":["Assign Interface","Do you want to configure Vlans now? yes","Дальше надо выбрать интерфейс который смотрит в сторону клиентов у меня vtnet1","Дальше надо добавить тег, смотрим в топологию и вводим 2000","опять выбираем vtnet1 и вводим уже следующий тег 2010","по той же схеме делаем и последний интерфейс","тыкаем enter","дальше мы должны выбрать интерфейс в сторону интернета wan","дальше указываем lan интерфейс у меня это vtnet1_vlan2010","по такому же принципу вводим остальные интерфейсы","когда все сделали нажимаем enter и y"]}],[{"l":"VRRP (alt linux)","p":["Это мы делаем на R2-KLG тоесть главный","Это делаем на R3-KLG тоесть не главный Обязательно указываем приоритет 99, и в state BACKUP"]}],[{"l":"Zabbix через докер","p":["Скачиваем докер и докер компоуз","Настраиваем директории для хранения файлов:","Создаём .env файл:","Создаём docker-compose:","Создаём конфигурационный файл nginx","Запускаем докер"]}],[{"l":"Шпора Raid","p":["Скачиваем пакет mdadm#смотреть сайт https://www.dmosk.ru/miniinstruktions.php?mini=mdadm","Создаём raid","Сохраняем его блт!!!","Записываем его в fstab","Чтобы посмотреть статусы используем эту команду"]}],[{"l":"Bind на opnsense","p":["Сначала качаем его это итак понятно","ОТКЛЮЧАЕМ UNBOUND DNS, он занимает порт и мешает нам","Заходим в bind указываем в Listen IPs","В Listen Port указываем 53","В DNS Forwarders указываем","На первой странице пока что ничего не трогаем","Идем в ACLs и создаем так acl так ее и называем и в networks указываем","Возвращаемся на первую страницу и там везде проставляем нашу acl","Идем в prinary zone и создаем там зону с такими параметрами","Спускаемся в низ и создаем Records записи как по примеру, ПЕРВАЯ САМАЯ ВАЖНАЯ"]}],[{"l":"Captive portal","p":["Заходим в captive portal Administration и создаем там zone","Заходим в Firewall > Rules > GUEST_KLG","Создаем правило для доступа к локальным сетям, в нем указываем","Заходим в консоль и пишем команду","Ip который мы получили вставляем в Destination в новом правиле","Создаем юзера в System > Access > Users"]}],[{"l":"DNS между филиалами","p":["DNS между филиалами В freeipa заходим на SRV-KLG(Сетевые службы->DNS->зоны перенаправления){Создаём зону rzn.jun.profi Перенаправители зон: 192.168.20.1; 10.0.0.1} Идём в зоны DNS; Добавляем ip-сеть обратной зоны всей сети rzn Потом nano /etc/named.conf Ищем путь /etc/bind/ipa-options-ext.conf И пишем Dnssec-validation no; Allow-query { any; }; Allow-recursion { any; }; Allow-transfer { any; }; На opnsense В srvices-> bind -> Configuration DNS forwarders 192.168.11.100 100.100.100.100"]}],[{"l":"Openssl","p":["Сайт откуда инфа: https://sysadminium.ru/create-own-certificate-authority-on-linux/ apt-get install openssl mkdir /opt/ssl cd /opt/ssl$ openssl genpkey -algorithm RSA -out rootCA.key -aes-128-cbc (#указываем пароль обязательно)$ openssl req -x509 -new -key rootCA.key -sha256 -days 3650 -out rootCA.crt","$ echo \"00\" > rootCA.srl$ nano klg.cnf","$openssl genpkey -algorithm RSA -out site.key$ openssl req -new -key site.key -config klg.cnf -reqexts req_ext -out site.csr$ openssl x509 -req -days 365 -CA rootCA.crt -CAkey rootCA.key -extfile klg.cnf -extensions req_ext -in site.csr -out site.crt$cp site.crt /etc/nginx/$cp site.key /etc/nginx/$cd /etc/nginx инфу по nginx и ssl можно найти на сайте dmosk$nano /etc/nginx/nginx.conf","$systemctl restart nginx На клиенте заходим в терминал:$scp root@192.168.10.101:/opt/ssl/rootCA.crt /etc/pki/ca-trust/source/anchors/$update-ca-turst$cp /etc/pki/ca-trust/source/anchors/rootCA.crt /home/student$chown student:student /home/student/rootCA.crt В настройках браузера firefox заходим в сертификацию и там добавляем сертификат который мы скопировалии"]}],[{"l":"Wg + ospf на opnsense","p":["делаем instance сначало по дефолту, смотрим на то что там надо писать","в Peers делай так же все по обычному, но в Allowed iPs указываем","Далее Заходим в Wireguard(Group) правила nat и там разрешаем все","Ассегнируем интерфейс WG, включаем его","Заходим в правила этого интерфейса и создаем одно разрешающее","Второе правило мы создаем и указываем в source и destination","Заходим в привила nat для wan порта и пробуем указать там разрещающее все для другой fw, если не получиться делаем полностью разрешающее правило","Дальше идем в routing general и там включаем его","Переходим в ospf и там тоже включаем его и указываем в passive interface локальные сети","Идем в ospf networks и указываем там 10.0.0.0/30 и 192.168.0.0/16"]}],[{"l":"ZFS","p":["Скачиваем все обновления и обновляем репозитории","Скачиваем саму zfs","Перезагружаем сервер","Пишем modprobe zfs для запуска zfs и заходим в файлик и раскоменчиваем строчку для запуска zfs при загрузке сервера","Создаём пул дисков","Смотрим статус","Создаём zfs файловую систему на пуле с именем data","Монтируем sudo"]}],[{"l":"Nginx","p":["В файле меняем параметры под нас(порт, стираем все до run, указываем /opt/data) порт 81","Внутри него пишем","Даем chmod и chown для папки","Дальше заходим в директорию где будут лежать наши файлики","Дальше нам надо настроить конфиг nginx Заходим в конфиг","Дальше нам надо сделать логотип професионалов чтобы отображалось на сайте","Дальше пишем команду после которой у меня все заработало","И навсякий случай setenforce 0","Настраиваем lighttpd для реверс прокси","Первым делом надо скачать nginx","Переходим в папку /opt/data и пишем","Переходим на сайт http://pro.firpo.ru Нажимаем на верхнюю картинку открыть в новом окне и запоминаем его ссылку","Создаем файл index.html в котором напишем слова которые будут у нас на сайте","Также надо отключить selinux","Теперь у нас будет картинка на сайте","Удаляем все внизу после строчек с http и пишем свое"]}],[{"l":"Raid","p":["/dev/md0 - название-l - это level raid-n - количество дисков","В fstab дописываем"]}],[{"l":"Ssh srv","p":["Выключаем selinux обязательно","Дальше заходим на pc-krd в терминал Пишем команды для того чтобы сгенерировать ключи и перенести их на сервер","Добавляем в любое место или после root строку","Заходим в конфиг ssh","Листаем в самый низ страницы и добавляем следующий небольшой блок кода","Меняем ему пароль","Меняем значение SELINUX на permissive Сохраняем и выходим, также можно с помощью команды sudo setenforce 0 но это будет действовать до перезагрузки, так что лучше в файле","Меняем порт на нужный по заданию","Нам надо зайти на srv-krd в файл /etc/sudoers","Настроить удаленный доступ к SRV-KRD по SSH На сервере SRV-KRD сервис SSH должен функционировать на порте 2202","Переходим на pc-krd в терминал и пишем команду","Подключение к SRV-KRD с PC-KRD из под пользователя user должно осуществляться командой “ssh SRV” без дополнительных параметров.","Пользователь user на SRV-KRD должен иметь возможность выполнять команды через sudo без ввода пароля.","После этого выходим и сохраняем файл","После этого для проверки можно писать","Проверка: для начала надо перезайти в терминал, закройте его и откройте обратно. Если у вас никаких ошибок вверху не написало значит все работает","Создаем user","Устройство PC-KRD при входе под пользователем user должно иметь доступ к SRV-KRD под пользователем user c использованием SSH ключей, без необходимости ввода пароля."]}],[{"l":"Zabbix","p":["Пишем в php.ini","Заходим в БД","Заходим в конфиг","Проверяем эти записи","Проверяем эти записи, если нету дописываем","Nginx для zabbix","Перед конфигом надо будет поменять порт в nano /etc/httpd/httpd.conf на 82","Настраиваем nginx","В конфиге пишем"]}]]